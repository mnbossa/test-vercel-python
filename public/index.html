<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>AImend</title>
    <style>
      body { font-family: system-ui, sans-serif; margin: 20px; }
      textarea { width: 100%; min-height: 140px; font-family: monospace; }
      .row { display:flex; gap:10px; align-items:center; margin-top:10px; }
      .col { flex: 1; }
      .controls { display:flex; gap:8px; }
      #out { white-space: pre-wrap; background:#f7f7f7; padding:12px; border-radius:6px; margin-top:12px; max-height:400px; overflow:auto; }
      label { font-weight:600; margin-bottom:6px; display:block; }
      .small { font-size:0.9rem; color:#555; }

      /* Titles panel */
      #titles-panel { margin-top:18px; border:1px solid #e2e2e2; padding:12px; border-radius:6px; max-width:1000px; background:#fff; }
      #titles-panel h2 { margin:0 0 8px 0; font-size:1.05rem; }
      .title-item { padding:8px 6px; border-bottom:1px solid #f3f3f3; }
      .title-item:last-child { border-bottom: none; }
      .title-item a { color:#0645ad; text-decoration:none; }
      .title-item a:hover { text-decoration:underline; }
      .titles-empty { color:#666; padding:8px 6px; }
    </style>
  </head>
  <body>
    <h1>AImend</h1>

    <label for="system_msg">SYSTEM_MSG (editable). Edit, then click Save to store locally.</label>
    <textarea id="system_msg"></textarea>
    <div class="row">
      <div class="controls">
        <button id="save_sys">Save system message</button>
        <button id="reset_sys">Reset to default</button>
      </div>
      <div class="small">Saved in browser localStorage; sent to proxy when Search is clicked.</div>
    </div>

    <hr>

    <div style="display:flex; gap:10px; margin-top:12px;">
      <input id="q" placeholder="Enter query (e.g., CAP)" style="flex:1">
      <button id="go">Search</button>
    </div>

    <div style="margin-top:12px;">
      <label for="debug"><input type="checkbox" id="debug"> Request debug info</label>
    </div>

    <pre id="out"></pre>

    <!-- Titles panel -->
    <label>
      <input id="processToggle" type="checkbox" />
        Process on server (create report)
    </label>
    <div id="titles-panel" aria-live="polite">
     <h2>Latest AGRI documents</h2>
     <div id="titles-list"><div class="titles-empty">Loading titlesâ€¦</div></div>
    </div>
    
    <script src="/app.js"></script>
  </body>
</html>
